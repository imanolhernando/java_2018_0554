<app-nav></app-nav>

<div class="container mb-3 mt-3">
  <div routerLinkActive="active">
    <a [routerLink]="['/principal']" class="btn btn-outline-primary mt-3 mb-3 col-3">
      Volver
    </a>

    <app-alert [alert]="alert"></app-alert>
    
  </div>
  <div class="row d-flex align-items-center mb-3">

    <div class="d-flex">
      <img class="mr-3 img-thumbnail" src="{{agente.imagen}}" alt="{{agente.nombre}}">
    </div>
    <p class="text-primary nombre"><b>Agente:</b> {{agente.nombre}}</p>
  </div>
</div>

<div id = "spin" class="row align-items-center mb-3"> 
  <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
  <span *ngIf="multas.length==0" class="spinner-border text-danger"></span>
  <span *ngIf="multas.length==0" class="spinner-border text-danger"></span>
  <span *ngIf="multas.length==0" class="spinner-border text-danger"></span>
</div>


<div class="container-fluid">

  <div class="row">

    <div class="col-lg-12">

      
      <div class="btn-group mb-2" role="group" aria-label="Basic example">
        <button type="button" (click)="cambiarTabla(true)" class="{{(isActiva)?'btn btn-primary':'btn btn-secondary'}}">ACTIVAS</button>
        <button type="button" (click)="cambiarTabla(false)" class="{{(!isActiva)?'btn btn-danger':'btn btn-secondary'}}">ANULADAS</button>

      </div>

      <table class="table table-striped table-hover tablaOrdenable" *ngIf="isActiva==true" id="lista">
        <thead class="thead-light">
          <tr>
            <th>Matricula</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Importe</th>
            <th>Modelo</th>
            <th>Concepto</th>
            <th></th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let m of multas">
            <td><b>{{m.coche.matricula}}</b></td>
            <td>{{m.fechaAlta | date}}</td>
            <td>{{m.fechaAlta | date:'shortTime'}}</td>
            <td>{{m.importe | moneda}}</td>
            <td>{{m.coche.modelo}}</td>
            <td>{{m.concepto}}</td>
            <td><button type="submit" (click)="seleccionar(m)" class="btn btn-block btn-danger" data-toggle="modal"
                data-target="#myModal">ANULAR
              </button></td>
        </tbody>
      </table>

      <table class="table table-striped table-hover tablaOrdenable" *ngIf="isActiva==false" id="listaanuladas">
        <thead class="thead-light">
          <tr>
            <th>Matricula</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Importe</th>
            <th>Modelo</th>
            <th>Concepto</th>
            <th>Fecha Baja</th>
            <th></th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ma of multasAnuladas">
            <td><b>{{ma.coche.matricula}}</b></td>
            <td>{{ma.fechaAlta | date}}</td>
            <td>{{ma.fechaAlta | date:'shortTime'}}</td>
            <td>{{ma.importe | moneda}}</td>
            <td>{{ma.coche.modelo}}</td>
            <td>{{ma.concepto}}</td>
            <td>{{ma.fechaBaja | date}}</td>
            <td><button type="submit" (click)="seleccionar(ma)" class="btn btn-block btn-primary" data-toggle="modal"
                data-target="#myModalDes">DES-ANULAR
              </button></td>
        </tbody>
      </table>


      <!-- The Modal ANULAR-->
      <div class="modal fade" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">¿Desea anular esta multa?</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>



            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" (click)="modificarAnular(multaSeleccionada.id)" class="btn btn-danger" data-dismiss="modal">Anular</button>&nbsp;
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
            </div>




          </div>
        </div>
      </div>
      <!--Modal anular-->

      <!-- The Modal DESANULAR-->
      <div class="modal fade" id="myModalDes">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">¿Desea activar esta multa?</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>



            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-success" (click)="modificarActivar(multaSeleccionada.id)"
                data-dismiss="modal">Confirmar</button>&nbsp;
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
            </div>
          </div>
        </div>
      </div>
      <!--Modal desanular-->



    </div>
  </div>
</div>
